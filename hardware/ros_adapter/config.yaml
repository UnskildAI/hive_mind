# ROS Adapter Configuration for SoArm 100

# Robot specifications
robot:
  name: soarm_100
  dof: 6  # 5 arm joints (base, shoulder, elbow, wrist1, wrist2) + 1 gripper
  
# ROS topic mappings
topics:
  joint_state: /joint_states
  camera: /camera/image_raw

# Controller Configuration
# Maps logical groups of joints to specific ROS topics
controllers:
  arm:
    topic: /so_100_arm_controller/joint_trajectory
    # Standard 5 DOF arm joints in Kinematic Order (Base -> Wrist)
    # Assumes: Shoulder_Rotation=Base, Shoulder_Pitch=Shoulder
    # IMPORTANT: The model expects this order.
    joints: [Shoulder_Rotation, Shoulder_Pitch, Elbow, Wrist_Pitch, Wrist_Roll]
    type: trajectory_msgs/JointTrajectory
  
  gripper:
    topic: /so_100_arm_gripper_controller/joint_trajectory
    # Gripper joint
    joints: [Gripper]
    type: trajectory_msgs/JointTrajectory

# Joint Limit Configuration
# This list must match the total ordering of [arm_joints + gripper_joints]
joints:
  names:
    - Shoulder_Rotation # Base
    - Shoulder_Pitch    # Shoulder
    - Elbow             # Elbow
    - Wrist_Pitch       # Wrist 1
    - Wrist_Roll        # Wrist 2
    - Gripper           # Gripper
  limits:
    # 5 arm joints + 1 gripper
    min: [-3.14, -3.14, -3.14, -3.14, -3.14, -0.5]
    max: [3.14, 3.14, 3.14, 3.14, 3.14, 1.5]
  
  velocity_limits: [1.0, 1.0, 1.0, 1.0, 1.0, 0.5]

# Pipeline connection
pipeline:
  url: http://localhost:8000/run_step
  timeout_ms: 1000
  
# Control loop
control:
  frequency_hz: 10  # Standard 100ms loop
  smoothing_alpha: 0.4  # Moderate smoothing (0.4 new, 0.6 old) for faster response
  
# Safety
safety:
  enable_limits: true
  emergency_stop_topic: /emergency_stop  # Optional
  
  # Workspace bounds (optional cartesian limits)
  workspace_bounds:
    x: [-0.5, 0.5]
    y: [-0.5, 0.5]
    z: [0.0, 0.8]
  
  # Collision heuristics
  collision_checks:
    enable_self_collision: true
    min_elbow_angle: -3.0  # Relaxed to allow full range of ALOHA model output
